<div class="map-page">
  <div>
    <div id="map" #map></div>
  </div>
  <div class="list-group-container" *ngIf="!isAddNewPoint">
    <tui-input [formControl]="searchTerm">
      Искать по адресу или названию пункта
    </tui-input>
    <button
    tuiButton
    appearance="green"
    (click)="onAddPoint()"
    >Добавить место</button>
    <div class="markers-page__filters">
      <p class="filters-title">Что вы хотите сдать?</p>
      <div class="filters-items">
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Батарейки')}" (click)="toggleTypeFilter('Батарейки')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 4H9.5C9.22 4 9 3.78 9 3.5V2.5C9 2.22 9.22 2 9.5 2H14.5C14.78 2 15 2.22 15 2.5V3.5C15 3.78 14.78 4 14.5 4ZM7.5 5H16.5C16.78 5 17 5.22 17 5.5V21.5C17 21.78 16.78 22 16.5 22H7.5C7.22 22 7 21.78 7 21.5V5.5C7 5.22 7.22 5 7.5 5ZM12.46 18.71L14.96 13.21C15.03 13.05 15.01 12.87 14.91 12.73C14.82 12.59 14.66 12.5 14.49 12.5H12.49V8.5C12.49 8.26 12.33 8.06 12.1 8.01C11.87 7.96 11.64 8.08 11.54 8.29L9.04 13.79C8.97 13.95 8.99 14.13 9.08 14.27C9.17 14.41 9.33 14.5 9.5 14.5H11.5V18.5C11.5 18.74 11.66 18.94 11.89 18.99C11.93 19 11.96 19 12 19C12.19 19 12.37 18.89 12.46 18.71Z" fill="#959595"/>
          </svg>         
      </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Одежда')}" *ngIf="allTypesObj.isClothes" (click)="toggleTypeFilter('Одежда')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.85 2.15L21.85 6.15C22.05 6.34 22.05 6.66 21.86 6.86L19.86 8.86C19.66 9.06 19.35 9.06 19.15 8.86L18 7.71V19H6V7.71L4.86 8.86C4.66 9.06 4.35 9.06 4.15 8.86L2.15 6.86C1.95 6.66 1.95 6.35 2.15 6.15L6.15 2.15C6.24 2.05 6.37 2 6.5 2H8.5C8.78 2 9 2.22 9 2.5C9 4.15 10.35 5.5 12 5.5C13.65 5.5 15 4.15 15 2.5C15 2.22 15.22 2 15.5 2H17.5C17.63 2 17.76 2.05 17.85 2.15Z" fill="#959595"/>
          <path d="M17.85 2.15L21.85 6.15C22.05 6.34 22.05 6.66 21.86 6.86L19.86 8.86C19.66 9.06 19.35 9.06 19.15 8.86L18 7.71V19H6V7.71L4.86 8.86C4.66 9.06 4.35 9.06 4.15 8.86L2.15 6.86C1.95 6.66 1.95 6.35 2.15 6.15L6.15 2.15C6.24 2.05 6.37 2 6.5 2H8.5C8.78 2 9 2.22 9 2.5C9 4.15 10.35 5.5 12 5.5C13.65 5.5 15 4.15 15 2.5C15 2.22 15.22 2 15.5 2H17.5C17.63 2 17.76 2.05 17.85 2.15Z" fill="#959595"/>
          <path d="M6 20V21.5C6 21.78 6.22 22 6.5 22H17.5C17.78 22 18 21.78 18 21.5V20H6Z" fill="#959595"/>
          </svg>          
      </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Стекло')}" *ngIf="allTypesObj.isGlass" (click)="toggleTypeFilter('Стекло')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.5H13C13.28 5.5 13.5 5.28 13.5 5V2C13.5 1.72 13.28 1.5 13 1.5H11C10.72 1.5 10.5 1.72 10.5 2V5C10.5 5.28 10.72 5.5 11 5.5ZM11.5 19.5H16C16.28 19.5 16.5 19.28 16.5 19V18C16.5 17.72 16.28 17.5 16 17.5H11.5C11.22 17.5 11 17.72 11 18V19C11 19.28 11.22 19.5 11.5 19.5ZM10 20C10 20.28 10.22 20.5 10.5 20.5H16C16.28 20.5 16.5 20.72 16.5 21V22C16.5 22.28 16.28 22.5 16 22.5H8C7.72 22.5 7.5 22.28 7.5 22V16.5C7.5 14.83 8.04 13.17 9.02 11.82C9.93 10.56 10.51 9.1 10.51 7.55V7C10.51 6.72 10.73 6.5 11.01 6.5H13.01C13.29 6.5 13.51 6.72 13.51 7V7.55C13.51 9.1 14.09 10.56 15 11.82C15.87 13.04 16.39 14.49 16.49 15.98C16.5 16.26 16.27 16.5 15.98 16.5H10.5C10.22 16.5 10 16.72 10 17V20Z" fill="#959595"/>
          </svg>
        </div>       
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Лампочки')}" *ngIf="allTypesObj.isLamp" (click)="toggleTypeFilter('Лампочки')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3885 3.17406L9.98767 3.95522C9.31654 4.07624 8.70042 3.55914 8.70042 2.877C8.70042 2.3379 9.0855 1.88681 9.6136 1.79879L14.0145 1.01764C14.6856 0.896618 15.3017 1.41372 15.3017 2.09585C15.3017 2.62396 14.9166 3.08605 14.3885 3.17406ZM16.589 6.14479L7.78725 7.6961C7.11612 7.81712 6.5 7.30002 6.5 6.60688C6.5 6.07878 6.88508 5.61669 7.41318 5.52867L16.2149 3.97737C16.886 3.85635 17.5022 4.37345 17.5022 5.05558C17.5022 5.59469 17.1171 6.04577 16.589 6.14479ZM16.2149 7.33302L7.41318 8.88433C6.88508 8.97234 6.5 9.43443 6.5 9.96254C6.5 10.6447 7.11612 11.1618 7.78725 11.0407L16.589 9.48945C17.1171 9.40143 17.5022 8.95034 17.5022 8.41123C17.5022 7.7291 16.886 7.212 16.2149 7.33302ZM7.41318 12.2292L16.2149 10.6779C16.886 10.5569 17.5022 11.074 17.5022 11.7671C17.5022 12.2952 17.1171 12.7573 16.589 12.8454L7.78725 14.3967C7.11612 14.5177 6.5 14.0006 6.5 13.3184C6.5 12.7793 6.88508 12.3282 7.41318 12.2292ZM14.6526 14.3085L9.15151 15.2767C8.88746 15.3207 8.70042 15.5517 8.70042 15.8158V18.7534C8.70042 19.0944 9.00848 19.3585 9.34955 19.2925L14.8506 18.3243C15.1147 18.2803 15.3017 18.0492 15.3017 17.7852V14.8476C15.3017 14.5065 14.9937 14.2425 14.6526 14.3085ZM10.2517 20.2496L13.5524 19.6665C13.8934 19.6114 14.2015 19.8755 14.2015 20.2166V20.7997C14.2015 22.0209 13.2223 23.0001 12.0011 23.0001C10.7798 23.0001 9.80063 22.0099 9.80063 20.7997C9.80063 20.5246 9.98767 20.3046 10.2517 20.2496Z" fill="#959595"/>
        </svg>          
        </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Металл')}" *ngIf="allTypesObj.isMetal" (click)="toggleTypeFilter('Металл')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M18.6642 5.33345C18.6642 7.17447 15.6793 8.6669 11.9973 8.6669C8.31528 8.6669 5.3304 7.17447 5.3304 5.33345C5.3304 3.49244 8.31528 2 11.9973 2C15.6793 2 18.6642 3.49244 18.6642 5.33345ZM14.2193 15.8891C14.2193 17.1164 13.2243 18.1114 11.997 18.1114C10.7696 18.1114 9.77471 17.1164 9.77471 15.8891C9.77471 14.6618 10.7696 13.6668 11.997 13.6668C13.2243 13.6668 14.2193 14.6618 14.2193 15.8891ZM17.7972 8.28898C16.3749 9.20013 14.3081 9.77792 11.997 9.77792C9.68579 9.77792 7.61905 9.20013 6.19678 8.28898C5.81899 8.04453 5.33008 8.30009 5.33008 8.74455V12.678C5.33008 12.8114 5.37453 12.9447 5.46342 13.0447C6.08566 13.7558 7.0857 14.3559 8.3413 14.767C8.58575 14.8448 8.88576 14.7225 8.99688 14.4892C9.53023 13.3558 10.6636 12.5558 12.0081 12.5558C13.3526 12.5558 14.4859 13.3447 15.0193 14.4892C15.1304 14.7225 15.4304 14.8448 15.6749 14.767C16.9194 14.3559 17.9305 13.7558 18.5527 13.0447C18.6194 12.9447 18.6639 12.8114 18.6639 12.6669V8.74455C18.6639 8.30009 18.175 8.04453 17.7972 8.28898ZM15.6749 15.9334C16.6527 15.6445 17.5194 15.2667 18.2305 14.7889C18.4194 14.6667 18.6639 14.7889 18.6639 15.0111V18.6668C18.6639 20.5113 15.6749 22.0002 11.997 22.0002C8.31908 22.0002 5.33008 20.5113 5.33008 18.6668V15.0111C5.33008 14.7889 5.57454 14.6667 5.76343 14.7889C6.46346 15.2667 7.33015 15.6556 8.30797 15.9334C8.5302 15.9889 8.67465 16.1778 8.70798 16.4C8.96354 17.989 10.3302 19.2224 11.997 19.2224C13.6637 19.2224 15.0304 18.0001 15.2748 16.4C15.3082 16.1778 15.4637 16 15.6749 15.9334Z" fill="#959595"/>
        </svg>
        </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Другое')}" *ngIf="allTypesObj.isOther" (click)="toggleTypeFilter('Другое')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 6.49 6.49 2 12 2C17.51 2 22 6.49 22 12C22 17.51 17.51 22 12 22C6.49 22 2 17.51 2 12ZM12.7258 14.21V16.25C12.7258 16.66 12.3968 17 12 17C11.6032 17 11.2742 16.66 11.2742 16.25V13.52C11.2742 13.11 11.6032 12.77 12 12.77C13.6839 12.77 15.0484 11.36 15.0484 9.64C15.0484 7.92 13.6839 6.5 12 6.5C10.3161 6.5 8.95161 7.91 8.95161 9.63C8.95161 10.04 8.62258 10.38 8.22581 10.38C7.82903 10.38 7.5 10.05 7.5 9.63C7.5 7.08 9.52258 5 12 5C14.4774 5 16.5 7.08 16.5 9.63C16.5 11.94 14.8645 13.85 12.7258 14.21ZM12 20C11.6032 20 11.2742 19.66 11.2742 19.25C11.2742 18.84 11.6032 18.5 12 18.5C12.3968 18.5 12.7258 18.84 12.7258 19.25C12.7258 19.66 12.3968 20 12 20Z" fill="#959595"/>
          </svg>          
        </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Бумага')}" *ngIf="allTypesObj.isPaper" (click)="toggleTypeFilter('Бумага')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M4.50038 6.9994H8.50038C8.78038 6.9994 9.00038 6.7794 9.00038 6.4994V2.4994C9.00038 2.2994 8.88038 2.1194 8.69038 2.0394C8.50038 1.9594 8.29038 1.9994 8.15038 2.1494L4.15038 6.1494C4.00038 6.2894 3.96038 6.4994 4.04038 6.6894C4.12038 6.8794 4.30038 6.9994 4.50038 6.9994ZM17.0004 18.499V2.49902C17.0004 2.21902 16.7804 1.99902 16.5004 1.99902H10.5004C10.2204 1.99902 10.0004 2.21902 10.0004 2.49902V7.49902C10.0004 7.77902 9.78041 7.99902 9.50041 7.99902H4.50041C4.22041 7.99902 4.00041 8.21902 4.00041 8.49902V18.499C4.00041 18.779 4.22041 18.999 4.50041 18.999H16.5004C16.7804 18.999 17.0004 18.779 17.0004 18.499ZM18.5003 4.99972H19.5003C19.7803 4.99972 20.0003 5.21972 20.0003 5.49972V21.4997C20.0003 21.7797 19.7803 21.9997 19.5003 21.9997H7.50028C7.22028 21.9997 7.00028 21.7797 7.00028 21.4997V20.4997C7.00028 20.2197 7.22028 19.9997 7.50028 19.9997H17.5003C17.7803 19.9997 18.0003 19.7797 18.0003 19.4997V5.49972C18.0003 5.21972 18.2203 4.99972 18.5003 4.99972Z" fill="#959595"/>
          </svg>          
        </div>
      <div [ngClass]="{'icon': true, 'icon_active': isTypeInFilters('Пластик')}" *ngIf="allTypesObj.isPlastic" (click)="toggleTypeFilter('Пластик')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M13.5 3.5H10.5C10.22 3.5 10 3.28 10 3V2C10 1.72 10.22 1.5 10.5 1.5H13.5C13.78 1.5 14 1.72 14 2V3C14 3.28 13.78 3.5 13.5 3.5ZM13.14 4.64023L16.35 7.85023C16.45 7.95023 16.5 8.07023 16.5 8.21023V8.50023C16.5 8.78023 16.28 9.00023 16 9.00023H8C7.72 9.00023 7.5 8.78023 7.5 8.50023V8.21023C7.5 8.07023 7.55 7.95023 7.65 7.85023L10.85 4.64023C10.94 4.54023 11.07 4.49023 11.2 4.49023H12.79C12.92 4.49023 13.05 4.55023 13.14 4.64023ZM16 10H8C7.72 10 7.5 10.22 7.5 10.5V13.5C7.5 13.78 7.72 14 8 14H16C16.28 14 16.5 13.78 16.5 13.5V10.5C16.5 10.22 16.28 10 16 10ZM8 15H16C16.28 15 16.5 15.22 16.5 15.5V15.7C16.5 15.88 16.41 16.05 16.25 16.14C14.61 17.06 14.61 19.43 16.25 20.35C16.4 20.44 16.5 20.61 16.5 20.79V22C16.5 22.28 16.28 22.5 16 22.5H8C7.72 22.5 7.5 22.28 7.5 22V20.79C7.5 20.61 7.6 20.45 7.75 20.36C9.39 19.44 9.39 17.07 7.75 16.15C7.6 16.06 7.5 15.89 7.5 15.71V15.5C7.5 15.22 7.72 15 8 15Z" fill="#959595"/>
          </svg>          
        </div>
      </div>
    </div>
    <div class="list-group">
      <div *ngFor="let colorMarker of points; let i = index"
          (dblclick)="deleteMarker(i)"
          (click)="flyTo( colorMarker.ingLat, colorMarker.address)"
           class="list-group-item"
      >
        <tui-tag
          *ngFor="let type of colorMarker.type"
          [value]="type"
          status="primary"
          size="l"
          class="tag"
        >
        </tui-tag>
        <h2>{{colorMarker.title}}</h2>
        <p>{{colorMarker.address}}</p>
        <p class="warning">С {{colorMarker.openTime}} до {{colorMarker.closeTime}}</p>
      </div>
    </div>
  </div>


  <form class="add-new-point" *ngIf="isAddNewPoint" [formGroup]="addNewPointGroup">
    <h1>Добавить новый пункт</h1>
    <div class="point-name">
      <h3>Название пункта</h3>
      <tui-input formControlName="title">Введите название пункта</tui-input>
    </div>
    <div class="point-adress">
      <h3>Адрес пункта</h3>
      <tui-input formControlName="address">Введите адрес пункта</tui-input>
    </div>
    
    <div class="waste-type">
      <h3>Принимаемые виды отходов</h3>
      <div class="waste-type__items" formGroupName="types">
        <tui-checkbox-block formControlName="isPaper" size="s" >Бумага</tui-checkbox-block>
        <tui-checkbox-block formControlName="isPlactic" size="s">Пластик</tui-checkbox-block>
        <tui-checkbox-block formControlName="isMetal" size="s">Металл</tui-checkbox-block>
        <tui-checkbox-block formControlName="isGlass" size="s">Стекло</tui-checkbox-block>
        <tui-checkbox-block formControlName="isBattery" size="s">Батарейки</tui-checkbox-block>
        <tui-checkbox-block formControlName="isLamp" size="s">Лампочки</tui-checkbox-block>
        <tui-checkbox-block formControlName="isClothes" size="s">Одежда</tui-checkbox-block>
        <tui-checkbox-block formControlName="isOther" size="s">Другое</tui-checkbox-block>
      </div>
    </div>
    <div class="work-time">
      <h3>Время работы</h3>
      <div class="work-time__items" formGroupName="workTime">
        <tui-input-time formControlName="start">С</tui-input-time>
        <tui-input-time formControlName="end">До</tui-input-time>
      </div>
      
    </div>
    <div class="add-new-points__buttons">
      <button tuiButton appearance="additional" (click)="onAddPoint()">Назад</button>
      <button tuiButton appearance="green" (click)="sendNewPoint()">Добавить</button>
    </div>
  </form>
</div>
